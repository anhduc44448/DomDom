<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <title>Trang chá»§ - Äom Ä‘Ã³m quÃ¡n</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="css/index.css">
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container">
      <a class="navbar-brand" href="index.html">
        <img src="logo.png" alt="Äom Ä‘Ã³m quÃ¡n" width="150">
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link active" href="index.html">Trang chá»§</a></li>
          <li class="nav-item"><a class="nav-link" href="about.html">Giá»›i thiá»‡u</a></li>
          <li class="nav-item"><a class="nav-link" href="menu.html">Thá»±c Ä‘Æ¡n</a></li>
          <li class="nav-item"><a class="nav-link" href="contact.html">LiÃªn há»‡</a></li>
          <li class="nav-item"><a class="nav-link" href="cart.html">ğŸ›’ Giá» hÃ ng <span id="cartCount"
                class="badge bg-danger">0</span></a></li>
        </ul>
      </div>
    </div>
  </nav>

  <button id="loginBtn" class="btn btn-primary">ÄÄƒng nháº­p</button>

  <section class="hero-section">
    <div class="overlay"></div>
    <div class="container hero-content">
      <h1>ChÃ o má»«ng Ä‘áº¿n vá»›i Äom Ä‘Ã³m quÃ¡n</h1>
      <p>KhÆ¡i nguá»“n cáº£m há»©ng tá»« tá»«ng tÃ¡ch cÃ  phÃª - KhÃ´ng gian lÃ½ tÆ°á»Ÿng cho CEO vÃ  doanh nhÃ¢n.</p>
      <a href="menu.html" class="btn btn-cta">KhÃ¡m phÃ¡ thá»±c Ä‘Æ¡n</a>
    </div>
  </section>

  <section class="best-seller-section">
    <div class="container">
      <h3>Best Seller</h3>
      <div id="bestSellersContainer" class="row justify-content-center">
        <div class="col-12 text-center py-5">
          <div class="spinner-border text-warning" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <p class="mt-3">Äang táº£i sáº£n pháº©m ná»•i báº­t...</p>
        </div>
      </div>
    </div>
  </section>

  <section class="intro-section">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-6 mb-4 mb-md-0">
          <h2>Vá» Äom Ä‘Ã³m quÃ¡n</h2>
          <p>Äom Ä‘Ã³m quÃ¡n lÃ  nÆ¡i há»™i tá»¥ hÆ°Æ¡ng vá»‹ cÃ  phÃª truyá»n thá»‘ng vÃ  hiá»‡n Ä‘áº¡i, mang Ä‘áº¿n cho báº¡n tráº£i nghiá»‡m thÆ° giÃ£n
            tuyá»‡t vá»i trong khÃ´ng gian áº¥m cÃºng, chuyÃªn nghiá»‡p vÃ  Ä‘áº³ng cáº¥p dÃ nh cho doanh nhÃ¢n.</p>
          <a href="about.html" class="btn btn-outline-dark">TÃ¬m hiá»ƒu thÃªm</a>
        </div>
        <div class="col-md-6">
          <img src="database/AnhDoAn/BanhTranBo.jpg" alt="KhÃ´ng gian quÃ¡n" class="img-fluid rounded shadow">
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="container">
      <p>&copy; 2024 Äom Ä‘Ã³m quÃ¡n - HÃ²a KhÃ¡nh Nam, ÄÃ  Náºµng</p>
      <p class="mb-0">Hotline: 0236 1234 5678 | Email: info@domdomquan.com</p>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/index.js"></script>
  <script>
    async function loadBestSellers() {
      try {
        const response = await fetch('api/get_products.php?type=best_seller');
        const result = await response.json();

        if (result.success && result.data.length > 0) {
          displayBestSellers(result.data);
        } else {
          showDefaultProducts();
        }
      } catch (error) {
        showDefaultProducts();
      }
    }

    function displayBestSellers(products) {
      const container = document.getElementById("bestSellersContainer");
      if (!container) return;

      let html = '';

      // Chá»‰ hiá»ƒn thá»‹ tá»‘i Ä‘a 3 sáº£n pháº©m
      const displayProducts = products.slice(0, 3);

      displayProducts.forEach(product => {
        const price = formatPrice(product.price);
        const imageUrl = product.image_path || 'database/AnhDoAn/BanhTranBo.jpg';

        html += `
                    <div class="col-md-4 mb-4">
                        <div class="card best-seller-card border-warning">
                            <img src="${imageUrl}" class="card-img-top" alt="${product.name}" 
                                 onerror="this.src='database/AnhDoAn/BanhTranBo.jpg'">
                            <div class="card-body text-center">
                                <h5 class="card-title">${product.name}</h5>
                                <span class="badge bg-warning text-dark mb-2">Best Seller</span>
                                <p class="card-text text-danger fw-bold">${price}Ä‘</p>
                                <a href="order.html?id=${product.id || 1}" class="btn btn-order w-100">Äáº·t mÃ³n</a>
                            </div>
                        </div>
                    </div>
                `;
      });

      container.innerHTML = html;
    }

    function showDefaultProducts() {
      const container = document.getElementById("bestSellersContainer");
      if (!container) return;

      container.innerHTML = `
                <div class="col-md-4 mb-4">
                    <div class="card best-seller-card border-warning">
                        <img src="database/AnhDoAn/BanhTranBo.jpg" class="card-img-top" alt="BÃ¡nh trÃ¡ng bÆ¡">
                        <div class="card-body text-center">
                            <h5 class="card-title">BÃ¡nh trÃ¡ng bÆ¡</h5>
                            <span class="badge bg-warning text-dark mb-2">Best Seller</span>
                            <p class="card-text text-danger fw-bold">25.000Ä‘</p>
                            <a href="order.html?id=1" class="btn btn-order w-100">Äáº·t mÃ³n</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card best-seller-card border-warning">
                        <img src="database/AnhDoUong/tra_dao_cam_sa.png" class="card-img-top" alt="TrÃ  Ä‘Ã o cam sáº£">
                        <div class="card-body text-center">
                            <h5 class="card-title">TrÃ  Ä‘Ã o cam sáº£</h5>
                            <span class="badge bg-warning text-dark mb-2">Best Seller</span>
                            <p class="card-text text-danger fw-bold">32.000Ä‘</p>
                            <a href="order.html?id=2" class="btn btn-order w-100">Äáº·t mÃ³n</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card best-seller-card border-warning">
                        <img src="database/AnhDoUong/tra_sua_tran_chau_duong_den.png" class="card-img-top" 
                             alt="TrÃ  sá»¯a trÃ¢n chÃ¢u Ä‘Æ°á»ng Ä‘en">
                        <div class="card-body text-center">
                            <h5 class="card-title">TrÃ  sá»¯a trÃ¢n chÃ¢u Ä‘Æ°á»ng Ä‘en</h5>
                            <span class="badge bg-warning text-dark mb-2">Best Seller</span>
                            <p class="card-text text-danger fw-bold">35.000Ä‘</p>
                            <a href="order.html?id=3" class="btn btn-order w-100">Äáº·t mÃ³n</a>
                        </div>
                    </div>
                </div>
            `;
    }

    function formatPrice(price) {
      return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    }

    function updateCartCount() {
      const cart = JSON.parse(localStorage.getItem("cart")) || [];
      const cartCount = document.getElementById("cartCount");
      if (cartCount) {
        cartCount.textContent = cart.length;
      }
    }

    // Load dá»¯ liá»‡u khi trang load
    document.addEventListener('DOMContentLoaded', function () {
      loadBestSellers();
      updateCartCount();
    });
  </script>
</body>

</html>